var e,t,n=document.links,i=[],a=0;for(t in n){var o=n[t].toString().toUpperCase();-1==o.indexOf(".MP3")&&-1==o.indexOf(".OGG")&&-1==o.indexOf(".WAV")||i.push(n[t])}if(0==i.length){var d=prompt("No songs detected on the current page. What type of music would you like to hear?","okgo");d&&window.open("https://www.google.com/search?q=intitle:\"index.of\" (wma|mp3|mp4|midi) "+d)}else{var r=w("div","player","","",""),p=w("div","playing","","",""),l=w("div","progressbar","","",function(t){var n=t.clientX;n/=window.innerWidth,e.currentTime=e.duration*n}),s=w("div","progress","","","");l.appendChild(s),p.appendChild(l);var u=w("div","songname","","","");p.appendChild(u);var c=w("div","buttons","","","");c.appendChild(w("button","","|<","",function(){a--,f()})),c.appendChild(w("button","",">","",function(){e.paused?e.play():e.pause()})),c.appendChild(w("button","",">|","",function(){a++,f()})),c.appendChild(w("button","","><","",function(){a=Math.floor(Math.random()*i.length),f()})),c.appendChild(w("button","","V","",function(){r.classList.toggle("pl")})),p.appendChild(c),r.appendChild(p);var h=w("ul","playlist","","","");for(songIndex in i){var g=decodeURIComponent(unescape(i[songIndex].href));h.appendChild(w("li","",g.substring(g.lastIndexOf("/")+1),songIndex,function(){a=parseInt(this.getAttribute("data")),f()}))}r.appendChild(h);var m=w("style","","","","");m.innerHTML=".player{position:absolute;top:0;bottom:0;left:0;right:0;background:#87ceeb;font-size:x-large}.playing,.playlist,.progressbar{position:relative}.playing{height:100%;width:100%}.pl .playing{height:20%}.playlist{height:0%;width:100%;box-sizing:border-box;max-width:800px;margin:auto;overflow:scroll}.pl .playlist{height:80%}.progressbar{height:100%;width:100%;text-align:center}.progress{height:100%;background:orange;text-align:center}.buttons,.songname{position:absolute;width:100%;text-align:center}.songname{top:33%}.buttons{top:66%}.player button{background:0 0;border:none;font-size:x-large}",r.appendChild(m);var b=document.createElement("meta"),v=document.createAttribute("name");v.value="viewport",b.setAttributeNode(v),(v=document.createAttribute("content")).value="width=device-width, initial-scale=1",b.setAttributeNode(v),document.head.appendChild(b),document.body.innerHTML="",document.body.appendChild(r),(e=new Audio).addEventListener("ended",function(){a++,f()},!1),x(),f(),navigator.mediaSession.setActionHandler("previoustrack",function(){a--,f()}),navigator.mediaSession.setActionHandler("nexttrack",function(){a++,f()})}function f(){e.src=i[a],e.play();var t=decodeURIComponent(i[a].href);u.innerHTML=t.substring(t.lastIndexOf("/")+1),navigator.mediaSession.metadata=new MediaMetadata({title:u.innerHTML})}function w(e,t,n,i,a){var o=document.createElement(e);""!=t&&o.classList.add(t);var d=document.createAttribute("data");return d.value=i,o.setAttributeNode(d),o.appendChild(document.createTextNode(n)),o.onclick=a,o}function x(){s.style.width=e.currentTime/e.duration*100+"%",requestAnimationFrame(x)}